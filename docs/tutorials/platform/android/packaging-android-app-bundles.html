<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.8">
<link rel="alternate" type="application/rss+xml" href="/news/rss.xml" title="AIR SDK RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/news/atom.xml" title="AIR SDK Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-197946260-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto+Mono&amp;family=Noto+Sans+JP&amp;family=Open+Sans&amp;family=Roboto&amp;family=Lato&amp;display=swap"><title data-react-helmet="true">Packaging Android App Bundles | AIR SDK</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://airsdk.dev/docs/tutorials/platform/android/packaging-android-app-bundles"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-docs-current"><meta data-react-helmet="true" property="og:title" content="Packaging Android App Bundles | AIR SDK"><meta data-react-helmet="true" name="description" content="This is specific for Google Play Publishing"><meta data-react-helmet="true" property="og:description" content="This is specific for Google Play Publishing"><link data-react-helmet="true" rel="shortcut icon" href="/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://airsdk.dev/docs/tutorials/platform/android/packaging-android-app-bundles"><link data-react-helmet="true" rel="alternate" href="https://airsdk.dev/docs/tutorials/platform/android/packaging-android-app-bundles" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://airsdk.dev/docs/tutorials/platform/android/packaging-android-app-bundles" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.700cf42e.css">
<link rel="preload" href="/assets/js/runtime~main.b2dc2d55.js" as="script">
<link rel="preload" href="/assets/js/main.7d29625f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><div class="announcementBar_3WsW" style="background-color:#8BE8CB;color:#091E42" role="banner"><div class="announcementBarContent_3EUC">This site is under construction. We need your <a target="_blank" rel="noopener noreferrer" href="https://github.com/airsdk/airsdk.dev/blob/main/CONTRIBUTING.md">contributions</a> to fill out the documentation.</div></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/images/logo.svg" alt="AIR SDK" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/images/logo.svg" alt="AIR SDK" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">AIR SDK</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Docs</a><a class="navbar__item navbar__link" href="/reference">Reference</a><a class="navbar__item navbar__link" href="/showcase">Showcase</a><a class="navbar__item navbar__link" href="/community">Community</a><a class="navbar__item navbar__link" href="/news">News</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/airsdk/airsdk.dev" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs">AIR</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Basics</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Tutorials</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Platform</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Android</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/platform/android/index">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/platform/android/android-tv-support">Android TV Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/platform/android/custom-resources">Custom Resources</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/tutorials/platform/android/packaging-android-app-bundles">Packaging Android App Bundles</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">iOS</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Desktop</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Development</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Building</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tools</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Packaging Android App Bundles</h1></header><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>This is specific for Google Play Publishing</p></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Important: From August 2021, new apps are required to publish with the Android App Bundle on Google Play. New apps larger than 150 MB are now supported by either Play Feature Delivery or Play Asset Delivery.</p></div></div><p>An Android App Bundle (AAB) is a publishing format that includes all your app’s compiled code and resources, and defers APK generation and signing to Google Play.</p><p>Google Play uses your app bundle to generate and serve optimized APKs for each device configuration, so only the code and resources that are needed for a specific device are downloaded to run your app. You no longer have to build, sign, and manage multiple APKs to optimize support for different devices, and users get smaller, more-optimized downloads.</p><p>More information on Android App Bundles <a href="https://developer.android.com/guide/app-bundle" target="_blank" rel="noopener noreferrer">here</a>.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="packaging">Packaging<a aria-hidden="true" class="hash-link" href="#packaging" title="Direct link to heading">​</a></h2><p>AIR supports creation of an App Bundle by creating an Android Studio project and using Gradle to build this. <strong>It requires an Android SDK to be installed.</strong> It also needs to have a JDK present and available via the <code>JAVA_HOME</code> environment variable.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>The creation of an Android App Bundle involves a few steps and can take significantly longer than creating an APK file. We recommend that APK generation is still used during development and testing, and the AAB output can be used when packaging up an application for upload to the Play Store.</p></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="installing-android-sdk">Installing Android SDK<a aria-hidden="true" class="hash-link" href="#installing-android-sdk" title="Direct link to heading">​</a></h3><p>You must download and install the Android SDK to your development machine. The easiest way to do this is to install Android Studio. <a href="https://developer.android.com/studio" target="_blank" rel="noopener noreferrer">Download</a>.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="manual-install">Manual Install<a aria-hidden="true" class="hash-link" href="#manual-install" title="Direct link to heading">​</a></h4><p>It is possible to install just the Android SDK if you do not want to install Android Studio. You will need to:</p><ul><li>Download and extract the command line tools: <a href="https://developer.android.com/studio#command-tools" target="_blank" rel="noopener noreferrer">https://developer.android.com/studio#command-tools</a></li><li>Add the extracted folder to your path</li><li>Run <code>sdkmanager</code> to list and install your Android SDK</li></ul><details class="details_2Ziz alert alert--info details_1VDD" data-collapsed="true"><summary>Using <code>sdkmanager</code></summary><div><div class="collapsibleContent_3OHp"><p></p><p>To list the available packages :</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#9CDCFE"><span class="token plain">sdkmanager --list</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Then to install the required sdk, you will want to install the following packages at least, <code>build-tools;XX.X.X</code>, <code>platform-tools</code>, <code>platforms;android-XX</code> and the <code>emulator</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#9CDCFE"><span class="token plain">sdkmanager --install &quot;build-tools;30.0.3&quot;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                     &quot;platform-tools&quot;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                     &quot;platforms;android-30&quot;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                     &quot;emulator&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p></p></div></div></details><h3 class="anchor anchorWithStickyNavbar_31ik" id="specify-the-android-sdk-path">Specify the Android SDK Path<a aria-hidden="true" class="hash-link" href="#specify-the-android-sdk-path" title="Direct link to heading">​</a></h3><p>You need to specify the path to your Android SDK in your AIR SDK configuration. There are several methods available to do this.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="using-an-environment-variable">Using an environment variable<a aria-hidden="true" class="hash-link" href="#using-an-environment-variable" title="Direct link to heading">​</a></h4><p>You can set the path to the Android SDK by setting an environment variable named <code>AIR_ANDROID_SDK_HOME</code> that points to the Android SDK location.</p><p>This has the advantage of applying the setting to all installs of the AIR SDK.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="using-platformsdk">Using <code>platformsdk</code><a aria-hidden="true" class="hash-link" href="#using-platformsdk" title="Direct link to heading">​</a></h4><p>If you use <code>adt</code> to package your application you can supply the path to the Android SDK via the <code>-platformsdk</code> option:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#9CDCFE"><span class="token plain">adt ... -platformsdk /path/to/android/sdk</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_31ik" id="using-adtcfg">Using <code>adt.cfg</code><a aria-hidden="true" class="hash-link" href="#using-adtcfg" title="Direct link to heading">​</a></h4><p>You can specify the Android SDK in the <code>adt.cfg</code> file located at <code>[AIRSDK]/lib/adt.cfg</code> and adding the following line:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#9CDCFE"><span class="token plain">AndroidPlatformSDK=/path/to/android/sdk</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>This will need to be updated in every AIR SDK you use.</strong></p><h3 class="anchor anchorWithStickyNavbar_31ik" id="creating-the-aab">Creating the AAB<a aria-hidden="true" class="hash-link" href="#creating-the-aab" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_31ik" id="using-adt">Using <code>adt</code><a aria-hidden="true" class="hash-link" href="#using-adt" title="Direct link to heading">​</a></h4><p>To package an AAB using <code>adt</code> simply change the target from <code>apk</code> to <code>aab</code> :</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#9CDCFE"><span class="token plain">adt -package</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    -target aab</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    &lt;signing options&gt;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    output.aab</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    &lt;app descriptor and files&gt;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    [-extdir &lt;folder&gt;]</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    -platformsdk &lt;path_to_android_sdk&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>You can exclude the <code>platformsdk</code> option if you are using one of the other approaches above.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="ides-without-aab-option">IDE&#x27;s without AAB option<a aria-hidden="true" class="hash-link" href="#ides-without-aab-option" title="Direct link to heading">​</a></h4><p>If you are using an IDE that currently cannot change the output target to <code>aab</code> you can force AIR to output an <code>aab</code> from the normal <code>apk</code> packaging process. This applies to most IDE&#x27;s currently, including IntelliJ, Animate and FDT.</p><p>This is done by setting a configuration option in <code>adt.cfg</code> (located at <code>[AIRSDK]/lib/adt.cfg</code>):</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#9CDCFE"><span class="token plain">CreateAndroidAppBundle=true</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>This will force the output to be in the AAB format, however your IDE may still output a file with the extension of <code>apk</code>. If this is the case you will need to rename the output from <code>application.apk</code> to <code>application.aab</code>.</p></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="specifying-certificates">Specifying Certificates<a aria-hidden="true" class="hash-link" href="#specifying-certificates" title="Direct link to heading">​</a></h3><p>There is no change to how you specify the certificate used to sign the package whether it is an APK or AAB that you are creating. The method you are currently using for producing an APK is the same with AAB.</p><p>You can continue to use the same application certificate that you created in the past to sign your application, however you may want to see the notes on the <a href="#upload-certificate">upload certificate</a> in the next section.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="signing-and-certificates">Signing and Certificates<a aria-hidden="true" class="hash-link" href="#signing-and-certificates" title="Direct link to heading">​</a></h2><p>In the past you were most likely using <code>adt</code> to generate a <code>p12</code> certificate that you were using to sign your APK for Google Play.</p><details class="details_2Ziz alert alert--info details_1VDD" data-collapsed="true"><summary>Example certificate generation</summary><div><div class="collapsibleContent_3OHp"><p></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#9CDCFE"><span class="token plain">adt -certificate    -cn COMPANYNAME</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                    -o &quot;COMPANY LTD&quot;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                    -validityPeriod 20</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                    -ou AU 2048-RSA</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                    YOUR_CERTIFICATE.p12</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                    PASSWORD</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p></p></div></div></details><p>If you are creating a new application you can still use this approach and the follow the directions below to convert it for uploading to the Play Console.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="converting-existing-certificates">Converting Existing Certificates<a aria-hidden="true" class="hash-link" href="#converting-existing-certificates" title="Direct link to heading">​</a></h3><p>Play App Signing is required for publishing applications using an Android App Bundle.</p><blockquote><p>Allow Google to protect the app signing key for your app and sign each release so Android devices can trust that updates are from you. This is a requirement to publish with the Android App Bundle.</p></blockquote><p>To convert your existing certificate for use with Play App Signing you can use the tool provided by Google to convert and encrypt your certificate file for uploading.</p><p>Firstly identify the <strong>alias</strong> of your key in your certificate by using <code>keytool</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#9CDCFE"><span class="token plain">keytool -v -list -keystore YOUR_CERTIFICATE.p12</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><details class="details_2Ziz alert alert--info details_1VDD" data-collapsed="true"><summary><code>keytool</code> location</summary><div><div class="collapsibleContent_3OHp"><p></p><p><code>keytool</code> is a key and certificate management utility. </p><p>You will find it in <code>$JAVA_HOME/bin/keytool</code>.</p><p></p></div></div></details><p>You will need to enter the password and then it should output something like the below:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#9CDCFE"><span class="token plain">Keystore type: JKS</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Keystore provider: SUN</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Your keystore contains 1 entry</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Alias name: 1</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Creation date: 03/06/2017</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Take note of the <code>Alias name: </code>, in this case it is &quot;1&quot;.</p><p>Next, start the process of signing up to &quot;Play App Signing&quot; in the Play console for your applilcation and use the <strong>Export and Upload a key from java keystore</strong> method.</p><ul><li>Log into the Play console and find the <strong>App Integrity</strong> page for your application:</li></ul><p><img src="/assets/images/playappsigning_setup-253b32881b336d21775cfd5a834c8095.png"></p><ul><li>Select the &quot;Export and upload a key from Java keystore&quot; option:</li></ul><p><img src="/assets/images/playappsigning_export_certificate-84bac8237b5f1fea053392d680867fd8.png"></p><p>This will give you the option to download the PEPK tool (<code>pepk.jar</code>) and show you an encryption key to use in the command.</p><p>Use this as below, replacing the alias with the alias name you got above:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#9CDCFE"><span class="token plain">java -jar pepk.jar  --keystore=YOUR_CERTIFICATE.p12</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                    --alias=1</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                    --output=encrypted_certificate.zip</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                    --encryptionkey=XXXXXXXXX</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This will create a <code>encrypted_certificate.zip</code> file which you can upload to the Play console.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="upload-certificate">Upload Certificate<a aria-hidden="true" class="hash-link" href="#upload-certificate" title="Direct link to heading">​</a></h3><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Optional</h5></div><div class="admonition-content"><p>Using the upload certificate is optional but recommended by Google. You can continue to use your application certificate to sign your AAB for uploading to the Play console, and generally that will be the easiest approach. </p></div></div><p>The upload certificate is the certificate that you will use to sign your AAB for submission to the Play Store (and likely for debugging locally). Once you have completed the process of signing up for Play app signing, the <strong>App integrity</strong> section will show you details on the certificate that you uploaded as the &quot;App signing key certificate&quot; and also show you the &quot;Upload key certificate&quot; details. </p><ul><li><p>If you don&#x27;t add a separate upload certificate during the Play App Signing setup process then you should continue to use your existing certificate to sign your AAB for submission to the Play Store. You can confirm this by looking in <strong>App integrity</strong> section and comparing the signatures of the upload and application certificates.  </p></li><li><p>If you choose to create a new upload certificate then during the Play App Signing setup process you should upload an additional certificate. <em>It is important that you do this as part of the migrating process otherwise you will have to contact Google to upgrade the key (see below).</em> </p><ul><li>Select &quot;Upload your upload key certificate&quot; in the Play App Signing page and select the <code>pem</code> upload certificate file.</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_31ik" id="to-create-an-upload-certificate">To create an upload certificate<a aria-hidden="true" class="hash-link" href="#to-create-an-upload-certificate" title="Direct link to heading">​</a></h4><ul><li>Create a RSA 2048 certificate using <code>adt</code> (replace fields as required): </li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#9CDCFE"><span class="token plain">adt -certificate \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    -cn &quot;common name&quot; \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    -validityPeriod 20 \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    2048-RSA \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    upload_certificate.p12 \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    password</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>Convert the <code>p12</code> to a <code>pem</code> file:</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#9CDCFE"><span class="token plain">keytool -export -rfc \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        -keystore upload_certificate.p12 \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        -alias 1 \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        -file upload_certificate.pem</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>Upload the <code>upload_certificate.pem</code> file as your upload certificate.</li></ul><h4 class="anchor anchorWithStickyNavbar_31ik" id="what-to-do-if-you-need-to-change-your-upload-certificate">What to do if you need to change your upload certificate<a aria-hidden="true" class="hash-link" href="#what-to-do-if-you-need-to-change-your-upload-certificate" title="Direct link to heading">​</a></h4><p>If you have already setup Play App Signing to change the upload key certificate go to the &quot;App integrity&quot; section for your application and follow the process to &quot;Request key upgrade&quot;. </p><ul><li>Open the &quot;App integrity&quot; section for your application;</li><li>Select &quot;Request key upgrade&quot;;</li><li>Select &quot;I&#x27;ve lost the upload key which I use to sign each release&quot;; </li><li>Follow the guide to contact support and provide a new certificate;</li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="testing">Testing<a aria-hidden="true" class="hash-link" href="#testing" title="Direct link to heading">​</a></h2><p>After you build your Android App Bundle, you should test how Google Play uses it to generate APKs and how those APKs behave when deployed to a device. There are two ways you should consider testing your app bundle: locally using the <code>bundletool</code> command line tool and through Google Play by uploading your bundle to the Play Console and using a test track. This section explains how to use <code>bundletool</code> to test your app bundle locally.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>If you haven&#x27;t already done so, install bundletool using brew (<code>brew install bundletool</code>) or download bundletool from the <a href="https://github.com/google/bundletool/releases" target="_blank" rel="noopener noreferrer">GitHub repository</a>.</p><p>In all the examples below <code>bundletool</code> can be replaced with <code>java -jar bundletool.jar</code> if you are using the jar from the repository directly.</p></div></div><p>The bundletool generates an <code>apks</code> from your app bundle, this is a container called an APK set archive, which uses the <code>apks</code> file extension. To generate an APK set for all device configurations your app supports from your app bundle, use the bundletool build-apks command, as shown below.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#9CDCFE"><span class="token plain">bundletool build-apks --bundle=my_app.aab --output=my_app.apks</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>If you want to deploy to a device, you need to also include your app’s signing information and add the <code>--connected-device</code> option to specify the particular APK to build:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#9CDCFE"><span class="token plain">bundletool build-apks</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    --bundle=my_app.aab</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    --output=my_app.apks</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    --connected-device</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    --ks=YOUR_KEYSTORE.ks</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    --ks-pass=pass:PASSWORD</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    --ks-key-alias=ALIAS</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>(See the section below to <a href="#creating-a-keystoreks">create a <code>keystore.ks</code></a>)</p><p>Then to install the app to the connected device:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#9CDCFE"><span class="token plain">bundletool install-apks --apks=my_app.apks</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>More information on the bundletool can be found <a href="https://developer.android.com/studio/command-line/bundletool" target="_blank" rel="noopener noreferrer">here</a></p><h3 class="anchor anchorWithStickyNavbar_31ik" id="creating-a-keystoreks">Creating a <code>keystore.ks</code><a aria-hidden="true" class="hash-link" href="#creating-a-keystoreks" title="Direct link to heading">​</a></h3><p>You can create a keystore for use in the bundletool from your existing p12 file using the following command.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#9CDCFE"><span class="token plain">keytool -importkeystore</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        -srckeystore YOUR_CERTIFICATE.p12</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        -srcstoretype pkcs12</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        -srcalias 1</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        -destkeystore YOUR_KEYSTORE.ks</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        -deststoretype jks</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        -destalias ALIAS</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>You will need to set the <code>srcalias</code> to match the one from your certificate (see above for getting this information) and then set a new <code>ALIAS</code> which you will pass to the bundle tool.</p><p>This will ask for a password for the new keystore and for the password for your existing certificate.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/airsdk/airsdk.dev/edit/main/docs/tutorials/platform/android/packaging-android-app-bundles.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/tutorials/platform/android/custom-resources"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« <!-- -->Custom Resources</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/tutorials/platform/ios/packaging-ipa"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Packaging an IPA<!-- --> »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#packaging" class="table-of-contents__link toc-highlight">Packaging</a><ul><li><a href="#installing-android-sdk" class="table-of-contents__link toc-highlight">Installing Android SDK</a></li><li><a href="#specify-the-android-sdk-path" class="table-of-contents__link toc-highlight">Specify the Android SDK Path</a></li><li><a href="#creating-the-aab" class="table-of-contents__link toc-highlight">Creating the AAB</a></li><li><a href="#specifying-certificates" class="table-of-contents__link toc-highlight">Specifying Certificates</a></li></ul></li><li><a href="#signing-and-certificates" class="table-of-contents__link toc-highlight">Signing and Certificates</a><ul><li><a href="#converting-existing-certificates" class="table-of-contents__link toc-highlight">Converting Existing Certificates</a></li><li><a href="#upload-certificate" class="table-of-contents__link toc-highlight">Upload Certificate</a></li></ul></li><li><a href="#testing" class="table-of-contents__link toc-highlight">Testing</a><ul><li><a href="#creating-a-keystoreks" class="table-of-contents__link toc-highlight">Creating a <code>keystore.ks</code></a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/basics/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials">Tutorials</a></li><li class="footer__item"><a class="footer__link-item" href="/reference">Reference</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/community">Community</a></li><li class="footer__item"><a class="footer__link-item" href="/showcase">Showcase</a></li><li class="footer__item"><a href="https://github.com/airsdk/Adobe-Runtime-Support/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://forum.starling-framework.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Starling Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/actionscript-3" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/news">News</a></li><li class="footer__item"><a href="https://github.com/airsdk/airsdk.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a class="footerLogoLink_MyFc" href="/"><img src="/images/logo.svg" alt="AIR" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/images/logo.svg" alt="AIR" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">Except as otherwise noted, this work is licensed under a <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution 3.0</a> License, and code samples are licensed under the MIT License. <br>Much of this content is based on the original <a href="https://help.adobe.com/en_US/air/build/index.html">Adobe developer documentation</a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.b2dc2d55.js"></script>
<script src="/assets/js/main.7d29625f.js"></script>
</body>
</html>